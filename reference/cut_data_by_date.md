# Cut nb_sim data by calendar date

Cut nb_sim data by calendar date

## Usage

``` r
cut_data_by_date(data, cut_date, event_gap = 5/365.25, ...)
```

## Arguments

- data:

  Data generated by
  [`nb_sim()`](https://keaven.github.io/gsDesignNB/reference/nb_sim.md).

- cut_date:

  Calendar time (relative to trial start) at which to censor follow-up.

- event_gap:

  Gap duration after each event during which no new events are counted.
  Can be a numeric value (default `5 / 365.25`) or a function returning
  a numeric value. The time at risk is reduced by the sum of these gaps
  (truncated by the cut date).

- ...:

  Additional arguments passed to methods.

## Value

A data frame with one row per subject randomized prior to `cut_date`
containing the truncated follow-up time (`tte`) and total number of
observed events (`events`).

## Examples

``` r
enroll_rate <- data.frame(rate = 20 / (5 / 12), duration = 5 / 12)
fail_rate <- data.frame(treatment = c("Control", "Experimental"), rate = c(0.5, 0.3))
dropout_rate <- data.frame(
  treatment = c("Control", "Experimental"),
  rate = c(0.1, 0.05), duration = c(100, 100)
)
sim <- nb_sim(enroll_rate, fail_rate, dropout_rate, max_followup = 2, n = 20)
cut_data_by_date(sim, cut_date = 1)
#>    id    treatment enroll_time       tte events
#> 1   1      Control   0.1078190 0.8784918      1
#> 2   2      Control   0.1255735 0.8744265      0
#> 3   3 Experimental   0.1352769 0.8647231      0
#> 4   4 Experimental   0.1466319 0.8533681      0
#> 5   5 Experimental   0.1471264 0.8391843      1
#> 6   6      Control   0.1674324 0.8325676      0
#> 7   7 Experimental   0.1945670 0.8054330      0
#> 8   8      Control   0.2352265 0.7647735      0
#> 9   9      Control   0.2624619 0.6964704      3
#> 10 10      Control   0.3061707 0.6664508      2
#> 11 11 Experimental   0.3321697 0.6678303      0
#> 12 12 Experimental   0.3363559 0.6636441      0
#> 13 13      Control   0.3770632 0.5955583      2
#> 14 14 Experimental   0.3778061 0.6221939      0
#> 15 15      Control   0.3859654 0.6140346      0
#> 16 16 Experimental   0.3938219 0.6061781      0
#> 17 17      Control   0.4692820 0.5307180      0
#> 18 18 Experimental   0.4778834 0.5221166      0
#> 19 19 Experimental   0.4804876 0.5058231      1
#> 20 20      Control   0.4879944 0.5120056      0
```
