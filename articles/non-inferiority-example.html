<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<title>Non-inferiority and super-superiority designs â€¢ gsDesignNB</title>
<!-- mathjax math --><script src="https://cdn.jsdelivr.net/npm/mathjax@3.2.2/es5/tex-mml-chtml.js" integrity="sha256-MASABpB4tYktI2Oitl4t+78w/lyA+D7b/s9GEP0JOGI=" crossorigin="anonymous"></script><script>
  window.MathJax = {
    chtml: {
      fontURL: "https://cdn.jsdelivr.net/npm/mathjax@3.2.2/es5/output/chtml/fonts/woff-v2"
    }
  };
</script><script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet">
<script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="../deps/font-awesome-6.5.2/css/all.min.css" rel="stylesheet">
<link href="../deps/font-awesome-6.5.2/css/v4-shims.min.css" rel="stylesheet">
<script src="../deps/headroom-0.11.0/headroom.min.js"></script><script src="../deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="../deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="../deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="../deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="../deps/search-1.0.0/fuse.min.js"></script><script src="../deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Non-inferiority and super-superiority designs">
</head>
<body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top bg-light" data-bs-theme="light" aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="../index.html">gsDesignNB</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">0.2.5</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto">
<li class="nav-item"><a class="nav-link" href="../reference/index.html">Reference</a></li>
<li class="active nav-item"><a class="nav-link" href="../articles/index.html">Articles</a></li>
<li class="nav-item"><a class="nav-link" href="../news/index.html">Changelog</a></li>
      </ul>
<ul class="navbar-nav">
<li class="nav-item"><form class="form-inline" role="search">
 <input class="form-control" type="search" name="search-input" id="search-input" autocomplete="off" aria-label="Search site" placeholder="Search for" data-search-index="../search.json">
</form></li>
<li class="nav-item"><a class="external-link nav-link" href="https://github.com/keaven/gsDesignNB/" aria-label="GitHub"><span class="fa fab fa-github fa-lg"></span></a></li>
      </ul>
</div>


  </div>
</nav><div class="container template-article">




<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">

      <h1>Non-inferiority and super-superiority designs</h1>
            
      
      <small class="dont-index">Source: <a href="https://github.com/keaven/gsDesignNB/blob/main/vignettes/non-inferiority-example.Rmd" class="external-link"><code>vignettes/non-inferiority-example.Rmd</code></a></small>
      <div class="d-none name"><code>non-inferiority-example.Rmd</code></div>
    </div>

    
    
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://keaven.github.io/gsDesignNB/">gsDesignNB</a></span><span class="op">)</span></span></code></pre></div>
<p>This vignette demonstrates how to use
<code><a href="../reference/sample_size_nbinom.html">sample_size_nbinom()</a></code> for non-inferiority and
super-superiority designs by adjusting the <code>rr0</code> parameter
(rate ratio under the null hypothesis).</p>
<div class="section level2">
<h2 id="non-inferiority-design">Non-inferiority design<a class="anchor" aria-label="anchor" href="#non-inferiority-design"></a>
</h2>
<p>In a non-inferiority trial, the goal is to demonstrate that a new
treatment is not unacceptably worse than the control. We specify a
non-inferiority margin, which is the maximum acceptable increase in the
event rate for the new treatment.</p>
<p>Suppose we have a control group with an event rate <span class="math inline">\(\lambda_1 = 0.1\)</span>. We assume the new
treatment has the same event rate <span class="math inline">\(\lambda_2
= 0.09\)</span>. We want to rule out the possibility that the new
treatment increases the rate by more than 10% (i.e., a rate ratio of
1.1).</p>
<ul>
<li><span class="math inline">\(\lambda_1 = 0.1\)</span></li>
<li><span class="math inline">\(\lambda_2 = 0.1\)</span></li>
<li>
<code>rr0</code> = 1.1 (Non-inferiority margin)</li>
<li>Dispersion <span class="math inline">\(k = 0.5\)</span>
</li>
<li>Power = 90%</li>
<li>Alpha = 0.025 (one-sided)</li>
</ul>
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">ni_design</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/sample_size_nbinom.html">sample_size_nbinom</a></span><span class="op">(</span></span>
<span>  lambda1 <span class="op">=</span> <span class="fl">0.1</span>,</span>
<span>  lambda2 <span class="op">=</span> <span class="fl">0.09</span>,</span>
<span>  rr0 <span class="op">=</span> <span class="fl">1.1</span>,</span>
<span>  dispersion <span class="op">=</span> <span class="fl">0.5</span>,</span>
<span>  power <span class="op">=</span> <span class="fl">0.9</span>,</span>
<span>  alpha <span class="op">=</span> <span class="fl">0.025</span>,</span>
<span>  trial_duration <span class="op">=</span> <span class="fl">2</span>,</span>
<span>  accrual_duration <span class="op">=</span> <span class="fl">1</span>,</span>
<span>  accrual_rate <span class="op">=</span> <span class="fl">100</span> <span class="co"># Dummy value to get sample size</span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/print.html" class="external-link">print</a></span><span class="op">(</span><span class="va">ni_design</span><span class="op">)</span></span>
<span><span class="co">#&gt; Sample size for negative binomial outcome</span></span>
<span><span class="co">#&gt; ==========================================</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; Sample size:     n1 = 3943, n2 = 3943, total = 7886</span></span>
<span><span class="co">#&gt; Expected events: 1123.8 (n1: 591.5, n2: 532.3)</span></span>
<span><span class="co">#&gt; Power: 90%, Alpha: 0.025 (1-sided)</span></span>
<span><span class="co">#&gt; Rates: control = 0.1000, treatment = 0.0900 (RR = 0.9000)</span></span>
<span><span class="co">#&gt; Null hypothesis RR: 1.1000</span></span>
<span><span class="co">#&gt; Dispersion: 0.5000, Avg exposure (calendar): 1.50</span></span>
<span><span class="co">#&gt; Accrual: 1.0, Trial duration: 2.0</span></span></code></pre></div>
<p>The output shows the sample size required to reject the null
hypothesis <span class="math inline">\(H_0: \lambda_2 / \lambda_1 \ge
1.1\)</span> in favor of <span class="math inline">\(H_1: \lambda_2 /
\lambda_1 &lt; 1.1\)</span>, assuming the true ratio is 0.9. This
strategy is useful when the new treatment may have other benefits (e.g.,
safety, convenience) that justify a small potential increase in event
rate. If we think there is a slight advantage in efficacy (as in this
example), the required sample size will be much smaller than for a
strict superiority test.</p>
</div>
<div class="section level2">
<h2 id="super-superiority-design">Super-superiority design<a class="anchor" aria-label="anchor" href="#super-superiority-design"></a>
</h2>
<p>In a super-superiority trial, we want to demonstrate that the new
treatment is not just better, but better by a specific margin.</p>
<p>Suppose we have a control group with an event rate <span class="math inline">\(\lambda_1 = 0.1\)</span> and a highly effective
new treatment with <span class="math inline">\(\lambda_2 =
0.02\)</span>. For instance, if the population is healthy we may want to
show a large reduction in event rates for a new preventive treatment
that may have side effects. This is in line with vaccine trials where
large efficacy margins are often required. We wish to test if the risk
reduction is greater than 50% (i.e., the rate ratio is less than
0.5).</p>
<ul>
<li><span class="math inline">\(\lambda_1 = 0.1\)</span></li>
<li><span class="math inline">\(\lambda_2 = 0.02\)</span></li>
<li>
<code>rr0</code> = 0.5 (Super-superiority threshold)</li>
<li>Dispersion <span class="math inline">\(k = 0.5\)</span>
</li>
<li>Trial duration = 2</li>
<li>Max follow-up = 1</li>
</ul>
<div class="sourceCode" id="cb3"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">ss_design</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/sample_size_nbinom.html">sample_size_nbinom</a></span><span class="op">(</span></span>
<span>  lambda1 <span class="op">=</span> <span class="fl">0.1</span>,</span>
<span>  lambda2 <span class="op">=</span> <span class="fl">0.02</span>,</span>
<span>  rr0 <span class="op">=</span> <span class="fl">0.5</span>,</span>
<span>  dispersion <span class="op">=</span> <span class="fl">0.5</span>,</span>
<span>  power <span class="op">=</span> <span class="fl">0.9</span>,</span>
<span>  alpha <span class="op">=</span> <span class="fl">0.025</span>,</span>
<span>  trial_duration <span class="op">=</span> <span class="fl">2</span>,</span>
<span>  accrual_duration <span class="op">=</span> <span class="fl">1</span>, <span class="co"># Assumed accrual duration</span></span>
<span>  accrual_rate <span class="op">=</span> <span class="fl">100</span>,</span>
<span>  max_followup <span class="op">=</span> <span class="fl">1</span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/print.html" class="external-link">print</a></span><span class="op">(</span><span class="va">ss_design</span><span class="op">)</span></span>
<span><span class="co">#&gt; Sample size for negative binomial outcome</span></span>
<span><span class="co">#&gt; ==========================================</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; Sample size:     n1 = 764, n2 = 764, total = 1528</span></span>
<span><span class="co">#&gt; Expected events: 91.7 (n1: 76.4, n2: 15.3)</span></span>
<span><span class="co">#&gt; Power: 90%, Alpha: 0.025 (1-sided)</span></span>
<span><span class="co">#&gt; Rates: control = 0.1000, treatment = 0.0200 (RR = 0.2000)</span></span>
<span><span class="co">#&gt; Null hypothesis RR: 0.5000</span></span>
<span><span class="co">#&gt; Dispersion: 0.5000, Avg exposure (calendar): 1.00</span></span>
<span><span class="co">#&gt; Accrual: 1.0, Trial duration: 2.0</span></span>
<span><span class="co">#&gt; Max follow-up: 1.0</span></span></code></pre></div>
<p>Here, we are testing <span class="math inline">\(H_0: \lambda_2 /
\lambda_1 \ge 0.5\)</span> against <span class="math inline">\(H_1:
\lambda_2 / \lambda_1 &lt; 0.5\)</span>. Since the assumed effect (<span class="math inline">\(\lambda_2/\lambda_1 = 0.2\)</span>) is much
stronger than the threshold (0.5), the power is high or the required
sample size is relatively small compared to a standard superiority test
with a smaller effect size.</p>
</div>
  </main><aside class="col-md-3"><nav id="toc" aria-label="Table of contents"><h2>On this page</h2>
    </nav></aside>
</div>



    <footer><div class="pkgdown-footer-left">
  <p>Developed by Keaven Anderson.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.2.0.</p>
</div>

    </footer>
</div>





  </body>
</html>
